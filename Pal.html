<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PAL OS PRO</title>
<style>
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;background:linear-gradient(135deg,#5f9cff,#7b5cff);height:100vh;overflow:hidden;}
#home{display:flex;flex-wrap:wrap;gap:20px;padding:20px;position:relative;z-index:1;}
.icon{width:90px;text-align:center;color:white;cursor:pointer;position:relative;z-index:2;transition: transform 0.2s;}
.icon:hover{transform:scale(1.1);}
.icon-box{width:75px;height:75px;border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:28px;background:rgba(255,255,255,0.25);backdrop-filter:blur(10px);box-shadow:0 6px 15px rgba(0,0,0,0.3);margin-bottom:6px;transition: transform 0.2s, box-shadow 0.2s;}
.icon:hover .icon-box{transform:scale(1.1);box-shadow:0 8px 20px rgba(0,0,0,0.4);}
.app-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.15);backdrop-filter:blur(25px);display:none;flex-direction:column;padding:30px;box-sizing:border-box;z-index:1000;}
.header{display:flex;justify-content:space-between;padding:16px;color:white;font-size:20px;}
.card{margin:12px 0;padding:20px;border-radius:22px;background:rgba(255,255,255,0.35);font-size:18px;pointer-events:auto;}
button{padding:12px 22px;font-size:18px;border-radius:22px;background:white;font-weight:600;cursor:pointer;position:relative;overflow:hidden;transition: all 0.2s ease;}
button:hover{transform:scale(1.05);box-shadow:0 6px 15px rgba(0,0,0,0.3);}
button:active{transform:scale(0.97);}
button::after{content:"";position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(255,255,255,0.3);border-radius:22px;transform:scale(0);opacity:0;transition: transform 0.3s, opacity 0.3s;}
button:focus::after, button:active::after{transform:scale(1.5);opacity:1;transition: transform 0.15s, opacity 0.15s;}
.chat-box,#notesList{flex:1;padding:12px;overflow-y:auto;display:flex;flex-direction:column;}
.message{margin:6px 0;padding:10px 14px;border-radius:18px;max-width:75%;}
.message.user{background:rgba(255,255,255,0.5);align-self:flex-end;}
.message.pal{background:rgba(0,0,0,0.25);color:white;align-self:flex-start;}
video,canvas{width:100%;max-height:70%;border-radius:18px;}
input,select,textarea{padding:12px 14px;font-size:18px;border-radius:14px;width:100%;box-sizing:border-box;}
</style>
</head>
<body>
<div id="home">
  <div class="icon" onclick="openApp('chat')"><div class="icon-box">üí¨</div>Chat</div>
  <div class="icon" onclick="openApp('music')"><div class="icon-box">üéµ</div>Music</div>
  <div class="icon" onclick="openApp('games')"><div class="icon-box">üéÆ</div>Platformer</div>
  <div class="icon" onclick="openApp('camera')"><div class="icon-box">üì∑</div>Camera</div>
  <div class="icon" onclick="openApp('gallery')"><div class="icon-box">üñºÔ∏è</div>Gallery</div>
  <div class="icon" onclick="openApp('calculator')"><div class="icon-box">üßÆ</div>Calculator</div>
  <div class="icon" onclick="openApp('notes')"><div class="icon-box">üìù</div>Notes</div>
  <div class="icon" onclick="openApp('weather')"><div class="icon-box">‚òÄÔ∏è</div>Weather</div>
  <div class="icon" onclick="openApp('settings')"><div class="icon-box">‚öôÔ∏è</div>Settings</div>
</div>

<!-- Chat -->
<div id="chat" class="app-screen">
  <div class="header">PAL Chat <button onclick="closeApp()">Home</button></div>
  <div class="chat-box" id="chatBox">
    <div class="message pal">Hey there! I'm PAL ü§ñ ‚Äî let's chat!</div>
  </div>
  <div class="card" style="display:flex;gap:8px;"><input id="chatInput" placeholder="Talk to PAL..."><button onclick="sendMessage()">Send</button></div>
</div>

<!-- Music -->
<div id="music" class="app-screen">
  <div class="header">Music <button onclick="closeApp()">Home</button></div>
  <div class="card">
    <select id="songSelect" onchange="playSong()">
      <option value="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">Song 1</option>
      <option value="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3">Song 2</option>
      <option value="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3">Song 3</option>
    </select>
    <audio id="audioPlayer" controls style="width:100%; margin-top:10px;"></audio>
  </div>
</div>

<!-- Platformer -->
<div id="games" class="app-screen">
  <div class="header">Platformer <button onclick="closeApp()">Home</button></div>
  <canvas id="gameCanvas" width="500" height="300" style="background:#87ceeb;margin:10px;border-radius:15px;"></canvas>
  <div class="card">Use LEFT/RIGHT to move, SPACE to jump.</div>
</div>

<!-- Camera -->
<div id="camera" class="app-screen">
  <div class="header">Camera <button onclick="closeApp()">Home</button></div>
  <div class="card" style="flex:1;display:flex;flex-direction:column;">
    <video id="video" autoplay playsinline style="flex:1;"></video>
    <button onclick="capturePhoto()">Capture</button>
    <canvas id="canvas" style="display:none;"></canvas>
  </div>
</div>

<!-- Gallery -->
<div id="gallery" class="app-screen">
  <div class="header">Gallery <button onclick="closeApp()">Home</button></div>
  <div class="card" id="galleryContainer"></div>
</div>

<!-- Calculator -->
<div id="calculator" class="app-screen">
  <div class="header">Calculator <button onclick="closeApp()">Home</button></div>
  <div class="card">
    <input type="text" id="calcInput" placeholder="0" readonly style="margin-bottom:10px;">
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:5px;">
      <button onclick="calcPress('7')">7</button><button onclick="calcPress('8')">8</button><button onclick="calcPress('9')">9</button><button onclick="calcPress('/')">/</button>
      <button onclick="calcPress('4')">4</button><button onclick="calcPress('5')">5</button><button onclick="calcPress('6')">6</button><button onclick="calcPress('*')">*</button>
      <button onclick="calcPress('1')">1</button><button onclick="calcPress('2')">2</button><button onclick="calcPress('3')">3</button><button onclick="calcPress('-')">-</button>
      <button onclick="calcPress('0')">0</button><button onclick="calcPress('.')">.</button><button onclick="calcPress('=')">=</button><button onclick="calcPress('+')">+</button>
    </div>
  </div>
</div>

<!-- Notes -->
<div id="notes" class="app-screen">
  <div class="header">Notes <button onclick="closeApp()">Home</button></div>
  <div class="card" style="display:flex;gap:5px;"><textarea id="noteInput" placeholder="Write a note..."></textarea><button onclick="saveNote()">Save</button></div>
  <div class="card" id="notesList"></div>
</div>

<!-- Weather -->
<div id="weather" class="app-screen">
  <div class="header">Weather <button onclick="closeApp()">Home</button></div>
  <div class="card">
    <input id="cityInput" placeholder="Enter city">
    <button onclick="getWeather()">Search</button>
    <p id="weatherResult"></p>
  </div>
</div>

<!-- Settings -->
<div id="settings" class="app-screen">
  <div class="header">Settings <button onclick="closeApp()">Home</button></div>
  <div class="card">
    <h3>Change Wallpaper</h3>
    <input type="file" accept="image/*" onchange="changeWallpaper(event)">
  </div>
</div>

<script>
const API_KEY = '8183f11165a1dc83ae95f3479dcaea49';

// Global functions
function openApp(id){
  document.querySelectorAll('.app-screen').forEach(a=>a.style.display='none');
  document.getElementById('home').style.display='none';
  const app=document.getElementById(id);
  if(app){ app.style.display='flex';
    if(id==='camera') startCamera();
    if(id==='gallery') loadGallery();
    if(id==='notes') renderNotes();
    if(id==='games') canvas.focus();
  }
}
function closeApp(){
  document.querySelectorAll('.app-screen').forEach(a=>a.style.display='none');
  document.getElementById('home').style.display='flex';
  stopCamera();
}

// Chat
function sendMessage(){
  const input=document.getElementById('chatInput');
  const text=input.value.trim(); if(!text) return;
  const box=document.getElementById('chatBox');
  const user=document.createElement('div'); user.className='message user'; user.textContent=text; box.appendChild(user);
  input.value='';
  setTimeout(()=>{
    const pal=document.createElement('div'); pal.className='message pal'; pal.textContent='PAL is ready! üòé'; box.appendChild(pal); box.scrollTop=box.scrollHeight;
  },400);
}

// Music
function playSong(){const song=document.getElementById('songSelect').value; const player=document.getElementById('audioPlayer'); player.src=song; player.play();}

// Calculator
let calcValue='';
function calcPress(val){const input=document.getElementById('calcInput'); if(val==='='){try{calcValue=eval(calcValue).toString();}catch(e){calcValue='Error';}}else calcValue+=val; input.value=calcValue;}

// Notes
let notes=JSON.parse(localStorage.getItem('notes')||'[]');
function saveNote(){const input=document.getElementById('noteInput'); if(!input.value) return; notes.push(input.value); localStorage.setItem('notes',JSON.stringify(notes)); input.value=''; renderNotes();}
function renderNotes(){const list=document.getElementById('notesList'); list.innerHTML=''; notes.forEach(n=>{const div=document.createElement('div'); div.className='card'; div.textContent=n; list.appendChild(div);});}

// Camera & Gallery
let galleryImages=JSON.parse(localStorage.getItem('gallery')||'[]');
function startCamera(){navigator.mediaDevices.getUserMedia({video:true}).then(stream=>{document.getElementById('video').srcObject=stream;}).catch(()=>alert('Camera access denied'));}
function stopCamera(){const v=document.getElementById('video'); if(v.srcObject) v.srcObject.getTracks().forEach(t=>t.stop());}
function capturePhoto(){const v=document.getElementById('video'); const c=document.getElementById('canvas'); c.width=v.videoWidth; c.height=v.videoHeight; c.getContext('2d').drawImage(v,0,0); const img=c.toDataURL(); galleryImages.push(img); localStorage.setItem('gallery',JSON.stringify(galleryImages)); loadGallery(); alert('Photo saved to gallery');}
function loadGallery(){const g=document.getElementById('galleryContainer'); g.innerHTML=''; galleryImages.forEach(src=>{const img=document.createElement('img'); img.src=src; img.style.width='100%'; img.style.marginBottom='10px'; g.appendChild(img);});}

// Platformer
const canvas=document.getElementById('gameCanvas'); const ctx=canvas.getContext('2d'); let px=50,py=260,vy=0,jumping=false;
function gameLoop(){ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle='green'; ctx.fillRect(0,280,canvas.width,20); ctx.fillStyle='red'; ctx.fillRect(px,py,20,20); vy+=0.8; py+=vy; if(py>260){py=260; vy=0; jumping=false;} requestAnimationFrame(gameLoop);}
canvas.tabIndex=0; canvas.addEventListener('keydown',e=>{if(e.code==='ArrowLeft'){px-=5;} else if(e.code==='ArrowRight'){px+=5;} else if(e.code==='Space'&&!jumping){vy=-12;jumping=true;}}); gameLoop();

// Weather
async function getWeather(){const city=document.getElementById('cityInput').value; if(!city) return; const res=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`); const data=await res.json(); if(data.main){document.getElementById('weatherResult').textContent=`${data.name}: ${data.main.temp}¬∞C, ${data.weather[0].description}`;}else{document.getElementById('weatherResult').textContent='City not found.';}}

// Wallpaper & Ripple
function changeWallpaper(event){const file=event.target.files[0]; if(!file) return; const reader=new FileReader(); reader.onload=e=>{document.body.style.background=`url('${e.target.result}') center/cover no-repeat`; localStorage.setItem('wallpaper',e.target.result);}; reader.readAsDataURL(file);}
window.onload=function(){const saved=localStorage.getItem('wallpaper'); if(saved) document.body.style.background=`url('${saved}') center/cover no-repeat`; document.querySelectorAll('button').forEach(btn=>{btn.addEventListener('click',e=>{const ripple=document.createElement('span'); ripple.style.position='absolute'; ripple.style.width=ripple.style.height=Math.max(btn.offsetWidth,btn.offsetHeight)+'px'; ripple.style.left=e.offsetX-ripple.offsetWidth/2+'px'; ripple.style.top=e.offsetY-ripple.offsetHeight/2+'px'; ripple.style.background='rgba(0,0,0,0.2)'; ripple.style.borderRadius='50%'; ripple.style.transform='scale(0)'; ripple.style.opacity='1'; ripple.style.transition='transform 0.4s, opacity 0.4s'; btn.appendChild(ripple); requestAnimationFrame(()=>{ripple.style.transform='scale(1)'; ripple.style.opacity='0';}); setTimeout(()=>ripple.remove(),400);});});};
</script>
</body>
</html>
